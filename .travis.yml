language: node_js
node_js:
  - node # uses most recent stable node version
services:
  - postgresql # starts up postgres
addons:
  postgresql: '9.6' # highest available postgres version on Travis
dist: trusty # uses trusty environment
sudo: false # when on trusty, uses Docker containers for speed
notifications:
  email:
    on_success: change # default: change (only when going from broken to fixed)
    on_failure: always # default: always (which is annoying, as it should be)
install:
  - npm ci # faster, goes only from package-lock
before_script:
  - psql -c 'create database "grace-shopper-test";' -U postgres # remember to change this name if you change it elsewhere (e.g. package.json)
script:
  - npm test             # test the code
  - npm run build-client # make the bundle

# before_deploy:
#   - rm -rf node_modules # omit from the tarball, since we skip cleanup
# deploy:
#   skip_cleanup: true # prevents travis from deleting the build
  provider: heroku
  app: grace-shopper-cck
  api_key: z7D7Q3RzRTSV37JAhPCwxw
    secure: LtuayPiQYTbMxCSSLvlD/zizmpB1+fU+31wtBOYueSf9DdWWkdfAHmA24YQ+zBlTP7gEWHNreeoRPMN8hHZDDM0qFEP6QWVvW3FIdMpZsB45aFIJ/ZFsGonIyd6O7xRX57IqTuc/Naxjj55n5VC7wA33k1j5Oz7vCX0JczKQjblbHXB1ZftJJe1uJFyBziq93ejoUitFbkh0JCHcpicQXbGu8GavM1eLejtUqa94j8mfQ3ZE/8b/mumSsDWDjgrCEI6h0ux8pi3HRgaqweGDLJM1wM0vvkKPy1Fr2NKIQUfkxs4dxwLPv+B0LkSsySri00rZBVGUVD4DF2GVQXwmvJvrnD7hzJK94pqCbLAK1emppi7OxAH1iVmFg3F7QijSFiNc8x2t2KXI3/4zjMphJuD0vejBUAXea8zcQ19SyYZAVKXm1T+nvSHLXOKnC7Muf00Us/Lw1Chpu5TtzI2GkCxtQnYEuJmMDPMeDL+8w3EW1qr9A/CoLs7tWEtmsuDWBD0iFW4Arlfkj7BoJc45IWvEDy0yyuCO1aGhp6L4kTcNR1SVIa7a+tU6i2PJYJ0+HWsGrr/7+NWVBfzjj8LrOv+/8HVgMpyeKQCGjGQzEeEXtr1HJwKv8iEg/pms2GzJMTfNMu0/DTxW1Xq73ZIlyuTEdnXKVgbUAUCbQttO9hk= # see README
